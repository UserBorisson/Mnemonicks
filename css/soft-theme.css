:root.theme-soft-light{
  --bg:#F5F7FB; --surface:#FFFFFF; --fg:#0F172A; --muted:#6B7280;
  --primary:#6E56CF; --primary-2:#8E7CFF; --border:#E6EAF2;
  --r:24px; --pad:16px;
  --shadow:0 10px 30px rgba(24,39,75,.08);
  --card-shadow:0 1px 0 rgba(255,255,255,.9) inset, 0 12px 24px rgba(24,39,75,.08);
  --grad:linear-gradient(135deg,#7C4DFF 0%,#6E56CF 100%);
  --ok:#16A34A; --err:#DC2626; --warn:#F59E0B; --info:#2563EB;
  --bg-color:        var(--bg);
  --elevated-color:  var(--surface);
  --text-primary:    var(--fg);
  --btn-face:        var(--surface);
  --btn-front:       var(--border);
  --btn-correct:     var(--ok);
  --btn-incorrect:   var(--err);
  --cloze-color:     #7cc7d1;
}
:root.theme-soft-dark{
  --bg:#121317; --surface:#1B1E23; --fg:#E7ECF3; --muted:#A3AAB7;
  --primary:#9F8CFF; --primary-2:#7B66FF; --border:#2A2F36;
  --r:24px; --pad:16px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --card-shadow:0 1px 0 rgba(255,255,255,.06) inset, 0 14px 32px rgba(0,0,0,.45);
  --grad:linear-gradient(135deg,#8E7CFF 0%,#6E56CF 100%);
  --ok:#22C55E; --err:#F87171; --warn:#FBBF24; --info:#3B82F6;
  --bg-color:        var(--bg);
  --elevated-color:  var(--surface);
  --text-primary:    var(--fg);
  --btn-face:        var(--surface);
  --btn-front:       var(--border);
  --btn-correct:     var(--ok);
  --btn-incorrect:   var(--err);
  --cloze-color:     #7cc7d1;
}

/* Shell */
.app{background:var(--bg); color:var(--fg); min-height:100vh;}
:root.theme-soft-light .app{
  background:
    radial-gradient(1200px 800px at 0% 0%, rgba(124,77,255,0.08), transparent 50%),
    radial-gradient(1000px 700px at 100% 100%, rgba(255,139,208,0.10), transparent 45%),
    var(--bg);
}
.app__content{display:grid; grid-template-columns:260px 1fr 360px; gap:24px; padding:24px;}
.app__rail,.app__dock{background:var(--surface); border:1px solid var(--border); border-radius:var(--r); box-shadow:var(--shadow);} 
.app__stage{min-height:calc(100vh - 96px);} 

.topbar{display:flex; align-items:center; justify-content:space-between; padding:10px 16px; position:sticky; top:0; z-index:30; background:var(--bg);} 
.topbar .tabs{
  position:static;
  transform:none;
  left:auto;
  top:auto;
  margin:0;
}
.topbar .mode-dropdown{
  display:flex;
  flex-direction:column;
  gap:8px;
  align-items:flex-start;
}
.settings-tab-btn{position:static; margin-left:auto;}
.theme-toggle-btn{ position:absolute; top:10px; right:64px; z-index:5; }

/* Card (hero) */
.card-soft{ background:var(--surface); border:1px solid var(--border); border-radius:calc(var(--r) + 4px); box-shadow:var(--card-shadow); padding:0; width:min(820px,92vw); margin-inline:auto; }
.flashcard{ background:var(--surface); border:1px solid var(--border); border-radius:calc(var(--r) + 4px); box-shadow:var(--card-shadow); }

/* Buttons & Inputs */
.btn-primary{background:var(--grad); color:#fff; border:0; border-radius:20px; padding:12px 18px; cursor:pointer; box-shadow:0 8px 16px rgba(110,86,207,.35);} 
.btn-primary:focus-visible{outline:3px solid rgba(110,86,207,.5);} 
.input-soft{background:var(--surface); border:1px solid var(--border); border-radius:14px; padding:12px 14px; color:var(--fg); box-shadow:0 1px 0 rgba(255,255,255,.4) inset;}
.answer-input{background:var(--surface); border:1px solid var(--border); border-radius:14px; padding:12px 14px; color:var(--fg); box-shadow:0 1px 0 rgba(255,255,255,.4) inset;}

/* MCQ options */
.mcq__opt{display:flex; align-items:center; justify-content:center; padding:14px; border:1px solid var(--border); border-radius:16px; background:var(--surface); box-shadow:var(--card-shadow);} 
.btn-face{border:1px solid var(--border); border-radius:16px; background:var(--surface);} 
.mcq__opt.is-correct{border-color:var(--ok); outline:3px solid color-mix(in oklab,var(--ok) 40%, transparent);} 
.mcq__opt.is-wrong{border-color:var(--err); outline:3px solid color-mix(in oklab,var(--err) 40%, transparent);} 

/* Toasts */
.toast{display:grid; grid-template-columns:auto 1fr auto; gap:12px; padding:12px 14px; border:1px solid var(--border); border-radius:16px; background:var(--surface); box-shadow:var(--shadow);} 

/* Accessibility */
:focus-visible{outline:3px solid color-mix(in oklab,var(--primary) 45%, white); outline-offset:2px;}
@media (prefers-reduced-motion: reduce){*{animation-duration:0.01ms !important; animation-iteration-count:1 !important; transition-duration:0.01ms !important;}}
